{"ast":null,"code":"import _defineProperty from\"E:/TestDeploy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:/TestDeploy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:/TestDeploy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/TestDeploy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/TestDeploy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useEffect,useState}from'react';import{toast}from'react-toastify';import{useParams}from\"react-router-dom\";import'react-toastify/dist/ReactToastify.css';import CommonUtils from'../../../../utils/CommonUtils';import'../AddProduct.scss';import{getProductDetailByIdService,UpdateProductDetailService}from'../../../../services/userService';import LoadingSpinner from'../../../../component/Spinner/LoadingSpinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditProductDetail=function EditProductDetail(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState({originalPrice:'',discountPrice:'',image:'',imageReview:'',isOpen:false,nameDetail:'',description:''}),_useState4=_slicedToArray(_useState3,2),inputValues=_useState4[0],setInputValues=_useState4[1];var _useParams=useParams(),id=_useParams.id;useEffect(function(){var fetchProductDetail=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);// Start loading\n_context.next=3;return getProductDetailByIdService(id);case 3:res=_context.sent;if(res&&res.errCode===0){setStateProductdetail(res.data);}setIsLoading(false);// End loading after all fetches\ncase 6:case\"end\":return _context.stop();}}},_callee);}));return function fetchProductDetail(){return _ref.apply(this,arguments);};}();fetchProductDetail();},[]);var setStateProductdetail=function setStateProductdetail(data){var _objectSpread2;setInputValues(_objectSpread(_objectSpread({},inputValues),{},(_objectSpread2={},_defineProperty(_objectSpread2,\"originalPrice\",data.originalPrice),_defineProperty(_objectSpread2,\"stock\",data.stock),_defineProperty(_objectSpread2,\"discountPrice\",data.discountPrice),_defineProperty(_objectSpread2,\"nameDetail\",data.nameDetail),_defineProperty(_objectSpread2,\"description\",data.description),_objectSpread2)));};var handleOnChange=function handleOnChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setInputValues(_objectSpread(_objectSpread({},inputValues),{},_defineProperty({},name,value)));};var handleSaveProductDetail=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setIsLoading(true);// Start loading\n_context2.next=3;return UpdateProductDetailService({id:id,description:inputValues.description,originalPrice:inputValues.originalPrice,discountPrice:inputValues.discountPrice,nameDetail:inputValues.nameDetail});case 3:res=_context2.sent;setIsLoading(false);// End loading after all fetches\nif(res&&res.errCode===0){toast.success(\"Cập nhật loại sản phẩm thành công!\");}else{toast.error(res.errMessage);}case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSaveProductDetail(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid px-4\",children:[isLoading&&/*#__PURE__*/_jsx(LoadingSpinner,{}),/*#__PURE__*/_jsx(\"h1\",{className:\"mt-4\",children:\"Qu\\u1EA3n l\\xFD chi ti\\u1EBFt s\\u1EA3n ph\\u1EA9m\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-table me-1\"}),\"C\\u1EADp nh\\u1EADt chi ti\\u1EBFt s\\u1EA3n ph\\u1EA9m\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputEmail4\",children:\"T\\xEAn lo\\u1EA1i s\\u1EA3n ph\\u1EA9m\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputValues.nameDetail,name:\"nameDetail\",onChange:function onChange(event){return handleOnChange(event);},className:\"form-control\",id:\"inputEmail4\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputEmail4\",children:\"Gi\\xE1 g\\u1ED1c\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:inputValues.originalPrice,name:\"originalPrice\",onChange:function onChange(event){return handleOnChange(event);},className:\"form-control\",id:\"inputEmail4\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputPassword4\",children:\"Gi\\xE1 khuy\\u1EBFn m\\xE3i\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:inputValues.discountPrice,name:\"discountPrice\",onChange:function onChange(event){return handleOnChange(event);},className:\"form-control\",id:\"inputPassword4\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputAddress\",children:\"M\\xF4 t\\u1EA3 chi ti\\u1EBFt\"}),/*#__PURE__*/_jsx(\"textarea\",{rows:\"4\",value:inputValues.description,name:\"description\",onChange:function onChange(event){return handleOnChange(event);},className:\"form-control\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleSaveProductDetail();},type:\"button\",className:\"btn btn-primary\",children:\"L\\u01B0u th\\xF4ng tin\"})]})})]})]});};export default EditProductDetail;","map":{"version":3,"names":["React","useEffect","useState","toast","useParams","CommonUtils","getProductDetailByIdService","UpdateProductDetailService","LoadingSpinner","EditProductDetail","props","isLoading","setIsLoading","originalPrice","discountPrice","image","imageReview","isOpen","nameDetail","description","inputValues","setInputValues","id","fetchProductDetail","res","errCode","setStateProductdetail","data","stock","handleOnChange","event","target","name","value","handleSaveProductDetail","success","error","errMessage"],"sources":["E:/TestDeploy/frontend/src/container/System/Product/ProductDetail/EditProductDetail.js"],"sourcesContent":["import React from 'react';\r\nimport { useEffect, useState } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport { useParams } from \"react-router-dom\";\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport CommonUtils from '../../../../utils/CommonUtils';\r\nimport '../AddProduct.scss';\r\nimport { getProductDetailByIdService, UpdateProductDetailService } from '../../../../services/userService';\r\nimport LoadingSpinner from '../../../../component/Spinner/LoadingSpinner';\r\nconst EditProductDetail = (props) => {\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [inputValues, setInputValues] = useState({\r\n\r\n        originalPrice: '', discountPrice: '',\r\n        image: '', imageReview: '', isOpen: false, nameDetail: '', description: ''\r\n    });\r\n    const { id } = useParams()\r\n\r\n    useEffect(() => {\r\n        let fetchProductDetail = async () => {\r\n            setIsLoading(true); // Start loading\r\n            let res = await getProductDetailByIdService(id)\r\n            if (res && res.errCode === 0) {\r\n                setStateProductdetail(res.data)\r\n            }\r\n            setIsLoading(false); // End loading after all fetches\r\n        }\r\n        fetchProductDetail();\r\n    }, [])\r\n    let setStateProductdetail = (data) => {\r\n        setInputValues({\r\n            ...inputValues,\r\n            [\"originalPrice\"]: data.originalPrice,\r\n            [\"stock\"]: data.stock,\r\n            [\"discountPrice\"]: data.discountPrice,\r\n            [\"nameDetail\"]: data.nameDetail,\r\n            [\"description\"]: data.description,\r\n        })\r\n\r\n    }\r\n    const handleOnChange = event => {\r\n        const { name, value } = event.target;\r\n        setInputValues({ ...inputValues, [name]: value });\r\n\r\n    };\r\n\r\n    let handleSaveProductDetail = async () => {\r\n        setIsLoading(true); // Start loading\r\n        let res = await UpdateProductDetailService({\r\n            id: id,\r\n\r\n            description: inputValues.description,\r\n\r\n\r\n            originalPrice: inputValues.originalPrice,\r\n            discountPrice: inputValues.discountPrice,\r\n            nameDetail: inputValues.nameDetail\r\n        })\r\n        setIsLoading(false); // End loading after all fetches\r\n        if (res && res.errCode === 0) {\r\n            toast.success(\"Cập nhật loại sản phẩm thành công!\")\r\n        } else {\r\n            toast.error(res.errMessage)\r\n        }\r\n    }\r\n    return (\r\n        <div className=\"container-fluid px-4\">\r\n         {isLoading && <LoadingSpinner />}\r\n            <h1 className=\"mt-4\">Quản lý chi tiết sản phẩm</h1>\r\n\r\n\r\n            <div className=\"card mb-4\">\r\n                <div className=\"card-header\">\r\n                    <i className=\"fas fa-table me-1\" />\r\n                    Cập nhật chi tiết sản phẩm\r\n                </div>\r\n                <div className=\"card-body\">\r\n                    <form>\r\n                        <div className=\"form-row\">\r\n                            <div className=\"form-group col-md-4\">\r\n                                <label htmlFor=\"inputEmail4\">Tên loại sản phẩm</label>\r\n                                <input type=\"text\" value={inputValues.nameDetail} name=\"nameDetail\" onChange={(event) => handleOnChange(event)} className=\"form-control\" id=\"inputEmail4\" />\r\n                            </div>\r\n                            <div className=\"form-group col-md-4\">\r\n                                <label htmlFor=\"inputEmail4\">Giá gốc</label>\r\n                                <input type=\"number\" value={inputValues.originalPrice} name=\"originalPrice\" onChange={(event) => handleOnChange(event)} className=\"form-control\" id=\"inputEmail4\" />\r\n                            </div>\r\n                            <div className=\"form-group col-md-4\">\r\n                                <label htmlFor=\"inputPassword4\">Giá khuyến mãi</label>\r\n                                <input type=\"number\" value={inputValues.discountPrice} name=\"discountPrice\" onChange={(event) => handleOnChange(event)} className=\"form-control\" id=\"inputPassword4\" />\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"inputAddress\">Mô tả chi tiết</label>\r\n                            <textarea rows=\"4\" value={inputValues.description} name=\"description\" onChange={(event) => handleOnChange(event)} className=\"form-control\"></textarea>\r\n                        </div>\r\n\r\n                        <button onClick={() => handleSaveProductDetail()} type=\"button\" className=\"btn btn-primary\">Lưu thông tin</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\nexport default EditProductDetail;"],"mappings":"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"},"metadata":{},"sourceType":"module"}