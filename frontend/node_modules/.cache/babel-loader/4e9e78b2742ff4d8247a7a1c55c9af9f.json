{"ast":null,"code":"import _regeneratorRuntime from\"E:/TestDeploy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/TestDeploy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"E:/TestDeploy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:/TestDeploy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"E:/TestDeploy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{useEffect,useState}from'react';import'./ChangePassword.scss';import{handleChangePassword}from'../../../services/userService';import{toast}from\"react-toastify\";import{useParams}from\"react-router\";import LoadingSpinner from'../../../component/Spinner/LoadingSpinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChangePassword=function ChangePassword(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useParams=useParams(),id=_useParams.id;var _useState3=useState({newpassword:'',confirmpassword:'',oldpassword:''}),_useState4=_slicedToArray(_useState3,2),inputValues=_useState4[0],setInputValues=_useState4[1];var handleOnChange=function handleOnChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setInputValues(_objectSpread(_objectSpread({},inputValues),{},_defineProperty({},name,value)));};var handleSavePassword=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,_objectSpread3;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);// Start loading\nif(!(!inputValues.newpassword||!inputValues.confirmpassword||!inputValues.oldpassword)){_context.next=5;break;}toast.error(\"Không được để thông tin trống\");_context.next=13;break;case 5:if(!(inputValues.newpassword!==inputValues.confirmpassword)){_context.next=9;break;}toast.error(\"Mật khẩu nhập lại không trùng khớp !\");_context.next=13;break;case 9:_context.next=11;return handleChangePassword({id:id,password:inputValues.confirmpassword,oldpassword:inputValues.oldpassword});case 11:res=_context.sent;if(res&&res.errCode===0){toast.success(\"Đổi mật khẩu thành công\");setInputValues(_objectSpread(_objectSpread({},inputValues),{},(_objectSpread3={},_defineProperty(_objectSpread3,\"newpassword\",''),_defineProperty(_objectSpread3,\"confirmpassword\",''),_defineProperty(_objectSpread3,\"oldpassword\",''),_objectSpread3)));}else{toast.error(res.errMessage);}case 13:setIsLoading(false);// End loading after all fetches\ncase 14:case\"end\":return _context.stop();}}},_callee);}));return function handleSavePassword(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid px-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mt-4\",children:\"Thay \\u0111\\u1ED5i th\\xF4ng tin t\\xE0i kho\\u1EA3n\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-table me-1\"}),\"\\u0110\\u1ED5i m\\u1EADt kh\\u1EA9u\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",children:\"M\\u1EADt kh\\u1EA9u c\\u0169\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:inputValues.oldpassword,name:\"oldpassword\",onChange:function onChange(event){return handleOnChange(event);},className:\"form-control\",id:\"exampleInputEmail1\",\"aria-describedby\":\"emailHelp\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",children:\"M\\u1EADt kh\\u1EA9u m\\u1EDBi\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:inputValues.newpassword,name:\"newpassword\",onChange:function onChange(event){return handleOnChange(event);},className:\"form-control\",id:\"exampleInputEmail1\",\"aria-describedby\":\"emailHelp\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputPassword1\",children:\"Nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:inputValues.confirmpassword,name:\"confirmpassword\",onChange:function onChange(event){return handleOnChange(event);},className:\"form-control\",id:\"exampleInputPassword1\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleSavePassword();},type:\"button\",className:\"btn btn-primary ml-3\",children:\"L\\u01B0u th\\xF4ng tin\"})]})})]})]}),isLoading&&/*#__PURE__*/_jsx(LoadingSpinner,{})]});};export default ChangePassword;","map":{"version":3,"names":["React","useEffect","useState","handleChangePassword","toast","useParams","LoadingSpinner","ChangePassword","isLoading","setIsLoading","id","newpassword","confirmpassword","oldpassword","inputValues","setInputValues","handleOnChange","event","target","name","value","handleSavePassword","error","password","res","errCode","success","errMessage"],"sources":["E:/TestDeploy/frontend/src/container/System/User/ChangePassword.js"],"sourcesContent":["import React from \"react\";\r\nimport { useEffect, useState } from 'react';\r\nimport './ChangePassword.scss';\r\nimport { handleChangePassword } from '../../../services/userService';\r\nimport { toast } from \"react-toastify\";\r\nimport { useParams } from \"react-router\";\r\nimport LoadingSpinner from '../../../component/Spinner/LoadingSpinner';\r\nconst ChangePassword = () => {\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const { id } = useParams()\r\n    const [inputValues, setInputValues] = useState({\r\n        newpassword: '', confirmpassword: '', oldpassword: ''\r\n    });\r\n    const handleOnChange = event => {\r\n        const { name, value } = event.target;\r\n        setInputValues({ ...inputValues, [name]: value });\r\n\r\n    };\r\n    let handleSavePassword = async () => {\r\n        setIsLoading(true); // Start loading\r\n        if (!inputValues.newpassword || !inputValues.confirmpassword || !inputValues.oldpassword) {\r\n            toast.error(\"Không được để thông tin trống\")\r\n        }\r\n        else if (inputValues.newpassword !== inputValues.confirmpassword) {\r\n            toast.error(\"Mật khẩu nhập lại không trùng khớp !\")\r\n        }\r\n        else {\r\n            let res = await handleChangePassword({\r\n                id: id,\r\n                password: inputValues.confirmpassword,\r\n                oldpassword: inputValues.oldpassword\r\n            })\r\n            if (res && res.errCode === 0) {\r\n                toast.success(\"Đổi mật khẩu thành công\")\r\n                setInputValues({ ...inputValues, [\"newpassword\"]: '', [\"confirmpassword\"]: '', [\"oldpassword\"]: '' })\r\n            } else {\r\n                toast.error(res.errMessage)\r\n            }\r\n        }\r\n        setIsLoading(false); // End loading after all fetches\r\n    }\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"container-fluid px-4\">\r\n                <h4 className=\"mt-4\">Thay đổi thông tin tài khoản</h4>\r\n\r\n\r\n                <div className=\"card mb-4\">\r\n                    <div className=\"card-header\">\r\n                        <i className=\"fas fa-table me-1\" />\r\n                        Đổi mật khẩu\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                        <form>\r\n                            <div className=\"form-group col-6\">\r\n                                <label htmlFor=\"exampleInputEmail1\">Mật khẩu cũ</label>\r\n                                <input type=\"password\" value={inputValues.oldpassword} name=\"oldpassword\" onChange={(event) => handleOnChange(event)} className=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" />\r\n\r\n                            </div>\r\n                            <div className=\"form-group col-6\">\r\n                                <label htmlFor=\"exampleInputEmail1\">Mật khẩu mới</label>\r\n                                <input type=\"password\" value={inputValues.newpassword} name=\"newpassword\" onChange={(event) => handleOnChange(event)} className=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" />\r\n\r\n                            </div>\r\n                            <div className=\"form-group col-6\">\r\n                                <label htmlFor=\"exampleInputPassword1\">Nhập lại mật khẩu</label>\r\n                                <input type=\"password\" value={inputValues.confirmpassword} name=\"confirmpassword\" onChange={(event) => handleOnChange(event)} className=\"form-control\" id=\"exampleInputPassword1\" />\r\n                            </div>\r\n\r\n                            <button onClick={() => handleSavePassword()} type=\"button\" className=\"btn btn-primary ml-3\">Lưu thông tin</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {isLoading && <LoadingSpinner />}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChangePassword;"],"mappings":"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"},"metadata":{},"sourceType":"module"}