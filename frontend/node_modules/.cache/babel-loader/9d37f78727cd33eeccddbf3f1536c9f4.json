{"ast":null,"code":"import _regeneratorRuntime from\"E:/TestDeploy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/TestDeploy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/TestDeploy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch}from'react-redux';import{toast}from'react-toastify';import{getItemCartStart}from'../../action/ShopCartAction';import{addShopCartService,deleteItemShopCartService}from'../../services/userService';import DeleteShopCartModal from'../../container/ShopCart/DeleteShopCartModal';import CommonUtils from'../../utils/CommonUtils';import LoadingSpinner from'../../component/Spinner/LoadingSpinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ShopCartItem(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),quantity=_useState2[0],setquantity=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOpenModal=_useState4[0],setisOpenModal=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var dispatch=useDispatch();var handleOnChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setquantity(event.target.value);setIsLoading(true);// Start loading\nif(!(event.target.value===\"0\")){_context.next=7;break;}setisOpenModal(true);setIsLoading(false);// End loading after all fetches\n_context.next=13;break;case 7:if(!event.target.value){_context.next=13;break;}_context.next=10;return addShopCartService({type:'UPDATE_QUANTITY',userId:props.userId,productdetailsizeId:props.productdetailsizeId,quantity:event.target.value});case 10:res=_context.sent;setIsLoading(false);// End loading after all fetches\nif(res&&res.errCode===0){dispatch(getItemCartStart(props.userId));}else{toast.error(res.errMessage);setquantity(res.quantity);}case 13:case\"end\":return _context.stop();}}},_callee);}));return function handleOnChange(_x){return _ref.apply(this,arguments);};}();useEffect(function(){setquantity(props.quantity);},[props.quantity]);var closeModal=function closeModal(){setisOpenModal(false);setquantity(1);};var handleDeleteShopCart=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setIsLoading(true);// Start loading\n_context2.next=3;return deleteItemShopCartService({data:{id:props.id}});case 3:res=_context2.sent;setIsLoading(false);// End loading after all fetches\nif(res&&res.errCode===0){dispatch(getItemCartStart(props.userId));setisOpenModal(false);}else{toast.error(res.errMessage);}case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function handleDeleteShopCart(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"media\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex\",children:/*#__PURE__*/_jsx(\"img\",{style:{width:'147px',height:'100px',objectFit:'cover'},src:props.image,alt:\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"media-body\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-justify\",children:[props.name,\" \"]})})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"h5\",{children:CommonUtils.formatter.format(props.price)})}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:'center'},children:props.isOrder===true?/*#__PURE__*/_jsx(\"span\",{children:quantity}):/*#__PURE__*/_jsx(\"div\",{className:\"product_count\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"qty\",id:\"sst\",value:quantity,title:\"Quantity:\",className:\"input-text qty\",min:\"0\",onChange:function onChange(event){return handleOnChange(event);}})})}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(\"h5\",{style:{color:'#71cd14'},children:CommonUtils.formatter.format(quantity*props.price)})}),props.isOrder===false&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"td\",{className:\"link-delete\",onClick:function onClick(){return setisOpenModal(true);},children:\"X\\xF3a\"}),/*#__PURE__*/_jsx(DeleteShopCartModal,{handleDeleteShopCart:handleDeleteShopCart,name:props.name,isOpenModal:isOpenModal,closeModal:closeModal})]}),isLoading&&/*#__PURE__*/_jsx(LoadingSpinner,{})]});}export default ShopCartItem;","map":{"version":3,"names":["React","useEffect","useState","useDispatch","toast","getItemCartStart","addShopCartService","deleteItemShopCartService","DeleteShopCartModal","CommonUtils","LoadingSpinner","ShopCartItem","props","quantity","setquantity","isOpenModal","setisOpenModal","isLoading","setIsLoading","dispatch","handleOnChange","event","target","value","type","userId","productdetailsizeId","res","errCode","error","errMessage","closeModal","handleDeleteShopCart","data","id","width","height","objectFit","image","name","formatter","format","price","textAlign","isOrder","color"],"sources":["E:/TestDeploy/frontend/src/component/ShopCart/ShopCartItem.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { toast } from 'react-toastify';\r\nimport { getItemCartStart } from '../../action/ShopCartAction';\r\nimport { addShopCartService, deleteItemShopCartService } from '../../services/userService';\r\nimport DeleteShopCartModal from '../../container/ShopCart/DeleteShopCartModal';\r\nimport CommonUtils from '../../utils/CommonUtils';\r\nimport LoadingSpinner from '../../component/Spinner/LoadingSpinner';\r\nfunction ShopCartItem(props) {\r\n    const [quantity, setquantity] = useState('')\r\n    const [isOpenModal, setisOpenModal] = useState(false)\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const dispatch = useDispatch()\r\n    let handleOnChange = async (event) => {\r\n        setquantity(event.target.value)\r\n        setIsLoading(true); // Start loading\r\n        if (event.target.value === \"0\") {\r\n\r\n            setisOpenModal(true)\r\n            setIsLoading(false); // End loading after all fetches\r\n        } else {\r\n            if (event.target.value) {\r\n                let res = await addShopCartService({\r\n                    type: 'UPDATE_QUANTITY',\r\n                    userId: props.userId,\r\n                    productdetailsizeId: props.productdetailsizeId,\r\n                    quantity: event.target.value,\r\n                })\r\n                setIsLoading(false); // End loading after all fetches\r\n                if (res && res.errCode === 0) {\r\n\r\n\r\n                    dispatch(getItemCartStart(props.userId))\r\n\r\n                } else {\r\n                    toast.error(res.errMessage)\r\n                    setquantity(res.quantity)\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n    useEffect(() => {\r\n        setquantity(props.quantity)\r\n    }, [props.quantity])\r\n    let closeModal = () => {\r\n        setisOpenModal(false)\r\n        setquantity(1)\r\n    }\r\n    let handleDeleteShopCart = async () => {\r\n\r\n        setIsLoading(true); // Start loading\r\n        let res = await deleteItemShopCartService({\r\n            data: {\r\n                id: props.id\r\n            }\r\n        })\r\n        setIsLoading(false); // End loading after all fetches\r\n        if (res && res.errCode === 0) {\r\n            dispatch(getItemCartStart(props.userId))\r\n            setisOpenModal(false)\r\n        } else {\r\n            toast.error(res.errMessage)\r\n        }\r\n    }\r\n    return (\r\n        <tr>\r\n\r\n            <td>\r\n                <div className=\"media\">\r\n                    <div className=\"d-flex\">\r\n                        <img style={{ width: '147px', height: '100px', objectFit: 'cover' }} src={props.image} alt=\"\" />\r\n                    </div>\r\n                    <div className=\"media-body\">\r\n                        <p className=\"text-justify\">{props.name} </p>\r\n                    </div>\r\n                </div>\r\n            </td>\r\n            <td>\r\n                <h5 >{CommonUtils.formatter.format(props.price)}</h5>\r\n            </td>\r\n            <td style={{ textAlign: 'center' }}>\r\n                {props.isOrder === true ? <span>{quantity}</span>\r\n                    :\r\n                    <div className=\"product_count\">\r\n                        <input type=\"number\" name=\"qty\" id=\"sst\" value={quantity}\r\n                            title=\"Quantity:\" className=\"input-text qty\" min=\"0\" onChange={(event) => handleOnChange(event)} />\r\n                    </div>\r\n                }\r\n\r\n            </td>\r\n            <td style={{ textAlign: 'center' }}>\r\n                <h5 style={{ color: '#71cd14' }}>{CommonUtils.formatter.format(quantity * props.price)}</h5>\r\n            </td>\r\n            {props.isOrder === false &&\r\n                <>\r\n                    <td className=\"link-delete\" onClick={() => setisOpenModal(true)}>XÃ³a</td>\r\n                    <DeleteShopCartModal handleDeleteShopCart={handleDeleteShopCart} name={props.name} isOpenModal={isOpenModal}\r\n                        closeModal={closeModal} />\r\n                </>\r\n\r\n            }\r\n            {isLoading && <LoadingSpinner />}\r\n\r\n        </tr>\r\n             \r\n    );\r\n}\r\n\r\nexport default ShopCartItem;"],"mappings":"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"},"metadata":{},"sourceType":"module"}