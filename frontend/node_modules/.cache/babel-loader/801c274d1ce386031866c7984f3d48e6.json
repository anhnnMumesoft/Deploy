{"ast":null,"code":"var _jsxFileName = \"E:\\\\SourceDoAn\\\\ecomResource\\\\ecomResource\\\\eCommerce_Reactjs\\\\src\\\\container\\\\User\\\\StoreVoucher.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport VoucherItem from '../Voucher/VoucherItem';\nimport logoVoucher from '../../../src/resources/img/logoVoucher.png';\nimport { BrowserRouter as Router, Switch, Route, Link, Redirect } from \"react-router-dom\";\nimport './StoreVoucher.scss';\nimport VoucherItemSmall from './VoucherItemSmall';\nimport { getAllVoucherByUserIdService } from '../../services/userService';\nimport moment, { now } from 'moment';\nimport { toast } from 'react-toastify';\nimport { PAGINATION } from '../../utils/constant';\nimport CommonUtils from '../../utils/CommonUtils';\nimport LoadingSpinner from '../../component/Spinner/LoadingSpinner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction StoreVoucher(props) {\n  _s();\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [inputValues, setInputValues] = useState({\n    codeVoucher: '',\n    activeBtn: false\n  });\n  const [dataVoucher, setdataVoucher] = useState([]);\n  const [count, setCount] = useState('');\n  const [numberPage, setnumberPage] = useState('');\n\n  function compareDates(d1, d2) {\n    var parts = d1.split('/');\n    var d1 = Number(parts[2] + parts[1] + parts[0]);\n    parts = d2.split('/');\n    var d2 = Number(parts[2] + parts[1] + parts[0]);\n    if (d1 <= d2) return true;\n    if (d1 >= d2) return false;\n  }\n\n  useEffect(() => {\n    setIsLoading(true); // Start loading\n\n    let id = props.id;\n\n    if (id) {\n      let fetchData = async () => {\n        let arrData = await getAllVoucherByUserIdService({\n          limit: PAGINATION.pagerow,\n          offset: 0,\n          id: props.id\n        });\n        let arrTemp = [];\n\n        if (arrData && arrData.errCode === 0) {\n          let nowDate = moment.unix(Date.now() / 1000).format('DD/MM/YYYY');\n\n          for (let i = 0; i < arrData.data.length; i++) {\n            let fromDate = moment.unix(arrData.data[i].voucherData.fromDate / 1000).format('DD/MM/YYYY');\n            let toDate = moment.unix(arrData.data[i].voucherData.toDate / 1000).format('DD/MM/YYYY');\n            let amount = arrData.data[i].voucherData.amount;\n            let usedAmount = arrData.data[i].voucherData.usedAmount;\n\n            if (amount !== usedAmount && compareDates(toDate, nowDate) === false && compareDates(fromDate, nowDate) === true) {\n              arrTemp[i] = arrData.data[i];\n            }\n          }\n\n          setdataVoucher(arrTemp);\n          setCount(Math.ceil(arrData.count / PAGINATION.pagerow));\n        }\n\n        setIsLoading(false); // End loading after all fetches\n      };\n\n      fetchData();\n    }\n  }, [props.id]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container rounded bg-white mt-5 mb-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-12 border-right border-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"box-heading\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"content-left\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"V\\xED voucher\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container-voucher\",\n          children: dataVoucher && dataVoucher.length > 0 && dataVoucher.map((item, index) => {\n            let percent = \"\";\n\n            if (item.voucherData.typeVoucherOfVoucherData.typeVoucher === \"percent\") {\n              percent = item.voucherData.typeVoucherOfVoucherData.value + \"%\";\n            }\n\n            if (item.voucherData.typeVoucherOfVoucherData.typeVoucher === \"money\") {\n              percent = CommonUtils.formatter.format(item.voucherData.typeVoucherOfVoucherData.value);\n            }\n\n            let MaxValue = CommonUtils.formatter.format(item.voucherData.typeVoucherOfVoucherData.maxValue);\n            return /*#__PURE__*/_jsxDEV(VoucherItemSmall, {\n              id: item.id,\n              name: item.voucherData.codeVoucher,\n              widthPercent: item.voucherData.usedAmount * 100 / item.voucherData.amount,\n              maxValue: MaxValue,\n              usedAmount: Math.round(item.voucherData.usedAmount * 100 / item.voucherData.amount * 10) / 10,\n              typeVoucher: percent\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 37\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), isLoading && /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 27\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n}\n\n_s(StoreVoucher, \"ikJK0tUSUGS9+ZofO8jdW/+21/g=\");\n\n_c = StoreVoucher;\nexport default StoreVoucher;\n\nvar _c;\n\n$RefreshReg$(_c, \"StoreVoucher\");","map":{"version":3,"names":["React","useState","useEffect","VoucherItem","logoVoucher","BrowserRouter","Router","Switch","Route","Link","Redirect","VoucherItemSmall","getAllVoucherByUserIdService","moment","now","toast","PAGINATION","CommonUtils","LoadingSpinner","StoreVoucher","props","isLoading","setIsLoading","inputValues","setInputValues","codeVoucher","activeBtn","dataVoucher","setdataVoucher","count","setCount","numberPage","setnumberPage","compareDates","d1","d2","parts","split","Number","id","fetchData","arrData","limit","pagerow","offset","arrTemp","errCode","nowDate","unix","Date","format","i","data","length","fromDate","voucherData","toDate","amount","usedAmount","Math","ceil","map","item","index","percent","typeVoucherOfVoucherData","typeVoucher","value","formatter","MaxValue","maxValue","round"],"sources":["E:/SourceDoAn/ecomResource/ecomResource/eCommerce_Reactjs/src/container/User/StoreVoucher.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport VoucherItem from '../Voucher/VoucherItem';\r\nimport logoVoucher from '../../../src/resources/img/logoVoucher.png'\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    Redirect\r\n} from \"react-router-dom\";\r\nimport './StoreVoucher.scss';\r\nimport VoucherItemSmall from './VoucherItemSmall';\r\nimport { getAllVoucherByUserIdService } from '../../services/userService';\r\nimport moment, { now } from 'moment';\r\nimport { toast } from 'react-toastify';\r\nimport { PAGINATION } from '../../utils/constant';\r\nimport CommonUtils from '../../utils/CommonUtils';\r\nimport LoadingSpinner from '../../component/Spinner/LoadingSpinner';\r\nfunction StoreVoucher(props) {\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [inputValues, setInputValues] = useState({\r\n        codeVoucher: '', activeBtn: false\r\n    });\r\n    const [dataVoucher, setdataVoucher] = useState([])\r\n    const [count, setCount] = useState('')\r\n    const [numberPage, setnumberPage] = useState('')\r\n    function compareDates(d1, d2) {\r\n        var parts = d1.split('/');\r\n        var d1 = Number(parts[2] + parts[1] + parts[0]);\r\n        parts = d2.split('/');\r\n        var d2 = Number(parts[2] + parts[1] + parts[0]);\r\n        if (d1 <= d2) return true\r\n        if (d1 >= d2) return false\r\n\r\n    }\r\n    useEffect(() => {\r\n        setIsLoading(true); // Start loading\r\n        let id = props.id\r\n        if (id) {\r\n            let fetchData = async () => {\r\n                let arrData = await getAllVoucherByUserIdService({\r\n\r\n                    limit: PAGINATION.pagerow,\r\n                    offset: 0,\r\n                    id: props.id\r\n                })\r\n                let arrTemp = []\r\n                if (arrData && arrData.errCode === 0) {\r\n                    let nowDate = moment.unix(Date.now() / 1000).format('DD/MM/YYYY')\r\n\r\n                    for (let i = 0; i < arrData.data.length; i++) {\r\n                        let fromDate = moment.unix(arrData.data[i].voucherData.fromDate / 1000).format('DD/MM/YYYY')\r\n                        let toDate = moment.unix(arrData.data[i].voucherData.toDate / 1000).format('DD/MM/YYYY')\r\n                        let amount = arrData.data[i].voucherData.amount\r\n                        let usedAmount = arrData.data[i].voucherData.usedAmount\r\n                        if (amount !== usedAmount && compareDates(toDate, nowDate) === false && compareDates(fromDate, nowDate) === true) {\r\n                            arrTemp[i] = arrData.data[i]\r\n\r\n                        }\r\n                    }\r\n                    setdataVoucher(arrTemp)\r\n                    setCount(Math.ceil(arrData.count / PAGINATION.pagerow))\r\n                }\r\n                setIsLoading(false); // End loading after all fetches\r\n            }\r\n            fetchData()\r\n        }\r\n\r\n    }, [props.id])\r\n\r\n   \r\n \r\n    return (\r\n\r\n        <div className=\"container rounded bg-white mt-5 mb-5\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-12 border-right border-left\">\r\n                    <div className=\"box-heading\">\r\n                        <div className=\"content-left\">\r\n                            <span>Ví voucher</span>\r\n                        </div>\r\n                     \r\n                    </div>\r\n                 \r\n                    <div className=\"container-voucher\">\r\n                        {dataVoucher && dataVoucher.length > 0 &&\r\n                            dataVoucher.map((item, index) => {\r\n                                let percent = \"\"\r\n                                if (item.voucherData.typeVoucherOfVoucherData.typeVoucher === \"percent\") {\r\n                                    percent = item.voucherData.typeVoucherOfVoucherData.value + \"%\"\r\n                                }\r\n                                if (item.voucherData.typeVoucherOfVoucherData.typeVoucher === \"money\") {\r\n                                    percent = CommonUtils.formatter.format(item.voucherData.typeVoucherOfVoucherData.value)\r\n\r\n                                }\r\n                                let MaxValue = CommonUtils.formatter.format(item.voucherData.typeVoucherOfVoucherData.maxValue)\r\n\r\n                                return (\r\n                                    <VoucherItemSmall id={item.id} key={index} name={item.voucherData.codeVoucher} widthPercent={item.voucherData.usedAmount * 100 / item.voucherData.amount} maxValue={MaxValue} usedAmount={Math.round((item.voucherData.usedAmount * 100 / item.voucherData.amount) * 10) / 10} typeVoucher={percent} />\r\n                                )\r\n                            })\r\n                        }\r\n\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {isLoading && <LoadingSpinner />}\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default StoreVoucher;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}