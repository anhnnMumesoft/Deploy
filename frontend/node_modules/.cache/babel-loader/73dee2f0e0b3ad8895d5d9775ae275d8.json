{"ast":null,"code":"import _objectSpread from\"E:/TestDeploy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"E:/TestDeploy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _classCallCheck from\"E:/TestDeploy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"E:/TestDeploy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"E:/TestDeploy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"E:/TestDeploy/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";var _excluded=[\"value\",\"onChange\",\"minDate\",\"onClose\"];import React,{Component}from'react';import Flatpickr from'react-flatpickr';import moment from'moment';import KeyCodeUtils from\"../../utils/KeyCodeUtils\";import'./DatePicker.scss';// const CustomInput = ({ value, defaultValue, inputRef, onInputChange, onInputBlur, ...props }) => {\n//     return <input {...props} className='custom-form-control custom-date-input' defaultValue={defaultValue} ref={inputRef}\n//         onChange={onInputChange}\n//         onBlur={onInputBlur}\n//     />;\n// };\nimport{jsx as _jsx}from\"react/jsx-runtime\";var DatePicker=/*#__PURE__*/function(_Component){_inherits(DatePicker,_Component);var _super=_createSuper(DatePicker);function DatePicker(){var _this;_classCallCheck(this,DatePicker);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.flatpickrNode=null;_this.nodeRef=function(element){_this.flatpickr=element&&element.flatpickr;_this.flatpickrNode=element&&element.node;if(_this.flatpickrNode){_this.flatpickrNode.addEventListener('blur',_this.handleBlur);_this.flatpickrNode.addEventListener('keydown',_this.handlerKeyDown);}};_this.handlerKeyDown=function(event){var keyCode=event.which||event.keyCode;if(keyCode===KeyCodeUtils.ENTER){event.preventDefault();var onChange=_this.props.onChange;var value=event.target.value;// Take the blur event and process the string value\nvar valueMoment=moment(value,'DD/MM/YYYY');onChange([valueMoment.toDate(),valueMoment.toDate()]);}};_this.handleBlur=function(event){var onChange=_this.props.onChange;var value=event.target.value;// Take the blur event and process the string value\nevent.preventDefault();var valueMoment=moment(value,'DD/MM/YYYY');onChange([valueMoment.toDate(),valueMoment.toDate()]);};_this.onOpen=function(){if(_this.flatpickrNode){_this.flatpickrNode.blur();}};_this.checkDateValue=function(str,max){if(str.charAt(0)!=='0'||str==='00'){var num=parseInt(str);if(isNaN(num)||num<=0||num>max)num=1;str=num>parseInt(max.toString().charAt(0))&&num.toString().length===1?'0'+num:num.toString();};return str;};_this.autoFormatOnChange=function(value,seperator){var input=value;var regexForDeleting=new RegExp(\"\\\\D\\\\\".concat(seperator,\"$\"));//if (/\\D\\/$/.test(input)) input = input.substr(0, input.length - 3); // dat.nt: Xóa thêm 1 ký tự nếu xóa dấu cách sau / (VD: 12 / 12 /=> 12 / 1)\nif(regexForDeleting.test(input))input=input.substr(0,input.length-3);var values=input.split(seperator).map(function(v){return v.replace(/\\D/g,'');});if(values[0])values[0]=_this.checkDateValue(values[0],31);if(values[1])values[1]=_this.checkDateValue(values[1],12);var output=values.map(function(v,i){return v.length===2&&i<2?v+' '+seperator+' ':v;});return output.join('').substr(0,14);};_this.onInputChange=function(e){if(_this.DISPLAY_FORMAT===_this.DATE_FORMAT_AUTO_FILL){var converted=_this.autoFormatOnChange(e.target.value,_this.SEPERATOR);e.target.value=converted;}};_this.onInputBlur=function(e){};_this.SEPERATOR=\"/\";_this.DATE_FORMAT_AUTO_FILL=\"d/m/Y\";_this.DISPLAY_FORMAT=\"d/m/Y\";return _this;}_createClass(DatePicker,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(this.flatpickrNode){this.flatpickrNode.removeEventListener('blur',this.handleBlur);this.flatpickrNode.removeEventListener('keydown',this.handlerKeyDown);}}},{key:\"close\",value:function close(){this.flatpickr.close();}},{key:\"render\",value:function render(){var _this$props=this.props,value=_this$props.value,onChange=_this$props.onChange,minDate=_this$props.minDate,onClose=_this$props.onClose,otherProps=_objectWithoutProperties(_this$props,_excluded);var options={dateFormat:this.DISPLAY_FORMAT,allowInput:true,disableMobile:true,onClose:onClose,onOpen:this.onOpen};if(minDate){options.minDate=minDate;}return/*#__PURE__*/_jsx(Flatpickr,_objectSpread({ref:this.nodeRef,value:value,onChange:onChange,options:options// render={\n//     ({ defaultValue, value, ...props }, ref) => {\n//         return <CustomInput defaultValue={defaultValue} inputRef={ref} onInputChange={this.onInputChange} onInputBlur={this.onInputBlur} />\n//     }\n// }\n},otherProps));}}]);return DatePicker;}(Component);export default DatePicker;","map":{"version":3,"names":["React","Component","Flatpickr","moment","KeyCodeUtils","DatePicker","flatpickrNode","nodeRef","element","flatpickr","node","addEventListener","handleBlur","handlerKeyDown","event","keyCode","which","ENTER","preventDefault","onChange","props","value","target","valueMoment","toDate","onOpen","blur","checkDateValue","str","max","charAt","num","parseInt","isNaN","toString","length","autoFormatOnChange","seperator","input","regexForDeleting","RegExp","test","substr","values","split","map","v","replace","output","i","join","onInputChange","e","DISPLAY_FORMAT","DATE_FORMAT_AUTO_FILL","converted","SEPERATOR","onInputBlur","removeEventListener","close","minDate","onClose","otherProps","options","dateFormat","allowInput","disableMobile"],"sources":["E:/TestDeploy/frontend/src/component/input/DatePicker.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport Flatpickr from 'react-flatpickr';\r\nimport moment from 'moment';\r\n\r\nimport KeyCodeUtils from \"../../utils/KeyCodeUtils\";\r\nimport './DatePicker.scss';\r\n\r\n// const CustomInput = ({ value, defaultValue, inputRef, onInputChange, onInputBlur, ...props }) => {\r\n//     return <input {...props} className='custom-form-control custom-date-input' defaultValue={defaultValue} ref={inputRef}\r\n//         onChange={onInputChange}\r\n//         onBlur={onInputBlur}\r\n//     />;\r\n// };\r\n\r\nclass DatePicker extends Component {\r\n\r\n    flatpickrNode = null;\r\n\r\n    nodeRef = element => {\r\n        this.flatpickr = element && element.flatpickr;\r\n        this.flatpickrNode = element && element.node;\r\n        if (this.flatpickrNode) {\r\n            this.flatpickrNode.addEventListener('blur', this.handleBlur);\r\n            this.flatpickrNode.addEventListener('keydown', this.handlerKeyDown);\r\n        }\r\n    };\r\n\r\n    handlerKeyDown = (event) => {\r\n        const keyCode = event.which || event.keyCode;\r\n        if (keyCode === KeyCodeUtils.ENTER) {\r\n            event.preventDefault();\r\n            const { onChange } = this.props;\r\n            const value = event.target.value;\r\n\r\n            // Take the blur event and process the string value\r\n            const valueMoment = moment(value, 'DD/MM/YYYY');\r\n            onChange([valueMoment.toDate(), valueMoment.toDate()]);\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.flatpickrNode) {\r\n            this.flatpickrNode.removeEventListener('blur', this.handleBlur);\r\n            this.flatpickrNode.removeEventListener('keydown', this.handlerKeyDown);\r\n        }\r\n    }\r\n\r\n    handleBlur = (event) => {\r\n        const { onChange } = this.props;\r\n        const value = event.target.value;\r\n\r\n        // Take the blur event and process the string value\r\n        event.preventDefault();\r\n        const valueMoment = moment(value, 'DD/MM/YYYY');\r\n        onChange([valueMoment.toDate(), valueMoment.toDate()]);\r\n    };\r\n\r\n    onOpen = () => {\r\n        if (this.flatpickrNode) {\r\n            this.flatpickrNode.blur();\r\n        }\r\n    }\r\n\r\n    close() {\r\n        this.flatpickr.close();\r\n    }\r\n\r\n    checkDateValue = (str, max) => {\r\n        if (str.charAt(0) !== '0' || str === '00') {\r\n            var num = parseInt(str);\r\n            if (isNaN(num) || num <= 0 || num > max) num = 1;\r\n            str = num > parseInt(max.toString().charAt(0)) && num.toString().length === 1 ? '0' + num : num.toString();\r\n        };\r\n        return str;\r\n    }\r\n\r\n    autoFormatOnChange = (value, seperator) => {\r\n        var input = value;\r\n\r\n        let regexForDeleting = new RegExp(`\\\\D\\\\${seperator}$`);\r\n\r\n        //if (/\\D\\/$/.test(input)) input = input.substr(0, input.length - 3); // dat.nt: Xóa thêm 1 ký tự nếu xóa dấu cách sau / (VD: 12 / 12 /=> 12 / 1)\r\n\r\n        if (regexForDeleting.test(input)) input = input.substr(0, input.length - 3);\r\n\r\n        var values = input.split(seperator).map(function (v) {\r\n            return v.replace(/\\D/g, '')\r\n        });\r\n\r\n        if (values[0]) values[0] = this.checkDateValue(values[0], 31);\r\n        if (values[1]) values[1] = this.checkDateValue(values[1], 12);\r\n        var output = values.map(function (v, i) {\r\n            return v.length === 2 && i < 2 ? v + ' ' + seperator + ' ' : v;\r\n        });\r\n        return output.join('').substr(0, 14);\r\n    }\r\n\r\n    onInputChange = (e) => {\r\n        if (this.DISPLAY_FORMAT === this.DATE_FORMAT_AUTO_FILL) {\r\n            let converted = this.autoFormatOnChange(e.target.value, this.SEPERATOR);\r\n            e.target.value = converted;\r\n        }\r\n    }\r\n\r\n    onInputBlur = (e) => {\r\n    }\r\n\r\n    //dat.nt : Auto Fill cho dạng ngăn cách và format cụ thể (seperator có thể dc thay thế)\r\n    SEPERATOR = \"/\";\r\n    DATE_FORMAT_AUTO_FILL = \"d/m/Y\"; // Format không thay đổi\r\n\r\n    // dat.nt : Format ngày hiển thị\r\n    DISPLAY_FORMAT = \"d/m/Y\";\r\n\r\n    render() {\r\n        const { value, onChange, minDate, onClose, ...otherProps } = this.props;\r\n        const options = {\r\n            dateFormat: this.DISPLAY_FORMAT,\r\n            allowInput: true,\r\n            disableMobile: true,\r\n            onClose: onClose,\r\n            onOpen: this.onOpen,\r\n            \r\n        };\r\n        if (minDate) {\r\n            options.minDate = minDate;\r\n        }\r\n        return (\r\n            <Flatpickr\r\n                ref={this.nodeRef}\r\n                value={value}\r\n                onChange={onChange}\r\n                options={options}\r\n               \r\n                // render={\r\n                //     ({ defaultValue, value, ...props }, ref) => {\r\n                //         return <CustomInput defaultValue={defaultValue} inputRef={ref} onInputChange={this.onInputChange} onInputBlur={this.onInputBlur} />\r\n                //     }\r\n                // }\r\n                {...otherProps}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default DatePicker;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}