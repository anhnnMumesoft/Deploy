{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useContext } from 'react';\nimport { LoadingContext } from '../component/LoadingContext';\n\nrequire(\"dotenv\").config();\n\nconst useCustomAxios = () => {\n  _s();\n\n  const {\n    setIsLoading\n  } = useContext(LoadingContext);\n  const instance = axios.create({\n    baseURL: process.env.REACT_APP_BACKEND_URL\n  });\n  instance.interceptors.request.use(config => {\n    setIsLoading(true); // Set loading to true on request start\n\n    if (localStorage.getItem(\"token\")) {\n      config.headers.authorization = \"Bearer \" + localStorage.getItem(\"token\").replaceAll('\"', \"\");\n    }\n\n    return config;\n  }, error => {\n    setIsLoading(false); // Set loading to false on request error\n\n    return Promise.reject(error);\n  });\n  instance.interceptors.response.use(response => {\n    setIsLoading(false); // Set loading to false on response\n\n    return response;\n  }, error => {\n    setIsLoading(false); // Ensure loading is set to false on response error\n\n    return Promise.reject(error);\n  });\n  return instance;\n};\n\n_s(useCustomAxios, \"oVmKWRGutY4m3RydN2q0O5FPZ8I=\");\n\nexport default useCustomAxios;","map":{"version":3,"names":["axios","useContext","LoadingContext","require","config","useCustomAxios","setIsLoading","instance","create","baseURL","process","env","REACT_APP_BACKEND_URL","interceptors","request","use","localStorage","getItem","headers","authorization","replaceAll","error","Promise","reject","response"],"sources":["E:/SourceDoAn/ecomResource/ecomResource/eCommerce_Reactjs/src/axios.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { useContext } from 'react';\r\nimport { LoadingContext } from '../component/LoadingContext';\r\nrequire(\"dotenv\").config();\r\n\r\nconst useCustomAxios = () => {\r\n    const { setIsLoading } = useContext(LoadingContext);\r\n\r\n    const instance = axios.create({\r\n        baseURL: process.env.REACT_APP_BACKEND_URL,\r\n    });\r\n\r\n    instance.interceptors.request.use(\r\n        (config) => {\r\n            setIsLoading(true); // Set loading to true on request start\r\n            if (localStorage.getItem(\"token\")) {\r\n                config.headers.authorization = \"Bearer \" + localStorage.getItem(\"token\").replaceAll('\"', \"\");\r\n            }\r\n            return config;\r\n        },\r\n        (error) => {\r\n            setIsLoading(false); // Set loading to false on request error\r\n            return Promise.reject(error);\r\n        }\r\n    );\r\n\r\n    instance.interceptors.response.use(\r\n        (response) => {\r\n            setIsLoading(false); // Set loading to false on response\r\n            return response;\r\n        },\r\n        (error) => {\r\n            setIsLoading(false); // Ensure loading is set to false on response error\r\n            return Promise.reject(error);\r\n        }\r\n    );\r\n\r\n    return instance;\r\n};\r\n\r\nexport default useCustomAxios;"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,OAA3B;AACA,SAASC,cAAT,QAA+B,6BAA/B;;AACAC,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AAEA,MAAMC,cAAc,GAAG,MAAM;EAAA;;EACzB,MAAM;IAAEC;EAAF,IAAmBL,UAAU,CAACC,cAAD,CAAnC;EAEA,MAAMK,QAAQ,GAAGP,KAAK,CAACQ,MAAN,CAAa;IAC1BC,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC;EADK,CAAb,CAAjB;EAIAL,QAAQ,CAACM,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CACKX,MAAD,IAAY;IACRE,YAAY,CAAC,IAAD,CAAZ,CADQ,CACY;;IACpB,IAAIU,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAJ,EAAmC;MAC/Bb,MAAM,CAACc,OAAP,CAAeC,aAAf,GAA+B,YAAYH,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BG,UAA9B,CAAyC,GAAzC,EAA8C,EAA9C,CAA3C;IACH;;IACD,OAAOhB,MAAP;EACH,CAPL,EAQKiB,KAAD,IAAW;IACPf,YAAY,CAAC,KAAD,CAAZ,CADO,CACc;;IACrB,OAAOgB,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;EACH,CAXL;EAcAd,QAAQ,CAACM,YAAT,CAAsBW,QAAtB,CAA+BT,GAA/B,CACKS,QAAD,IAAc;IACVlB,YAAY,CAAC,KAAD,CAAZ,CADU,CACW;;IACrB,OAAOkB,QAAP;EACH,CAJL,EAKKH,KAAD,IAAW;IACPf,YAAY,CAAC,KAAD,CAAZ,CADO,CACc;;IACrB,OAAOgB,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;EACH,CARL;EAWA,OAAOd,QAAP;AACH,CAjCD;;GAAMF,c;;AAmCN,eAAeA,cAAf"},"metadata":{},"sourceType":"module"}