{"ast":null,"code":"import _regeneratorRuntime from\"E:/TestDeploy/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"E:/TestDeploy/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:/TestDeploy/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"E:/TestDeploy/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/TestDeploy/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useEffect,useState}from'react';import{createAllCodeService,getDetailAllcodeById,UpdateAllcodeService}from'../../../services/userService';import{toast}from'react-toastify';import{useParams}from\"react-router-dom\";import'react-toastify/dist/ReactToastify.css';import LoadingSpinner from'../../../component/Spinner/LoadingSpinner';import moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddSubject=function AddSubject(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isActionADD=_useState4[0],setisActionADD=_useState4[1];var _useParams=useParams(),id=_useParams.id;var _useState5=useState({value:'',code:''}),_useState6=_slicedToArray(_useState5,2),inputValues=_useState6[0],setInputValues=_useState6[1];useEffect(function(){if(id){var fetchDetailSubject=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var allcode,_objectSpread2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setisActionADD(false);setIsLoading(true);// Start loading\n_context.next=4;return getDetailAllcodeById(id);case 4:allcode=_context.sent;setIsLoading(false);// Set loading to false when all data is fetchedv\nif(allcode&&allcode.errCode===0){setInputValues(_objectSpread(_objectSpread({},inputValues),{},(_objectSpread2={},_defineProperty(_objectSpread2,\"value\",allcode.data.value),_defineProperty(_objectSpread2,\"code\",allcode.data.code),_objectSpread2)));}case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchDetailSubject(){return _ref.apply(this,arguments);};}();fetchDetailSubject();}},[]);var handleOnChange=function handleOnChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setInputValues(_objectSpread(_objectSpread({},inputValues),{},_defineProperty({},name,value)));};var handleSaveSubject=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,_objectSpread4,_res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(isActionADD===true)){_context2.next=9;break;}setIsLoading(true);// Start loading\n_context2.next=4;return createAllCodeService({value:inputValues.value,code:inputValues.code,type:'SUBJECT'});case 4:res=_context2.sent;setIsLoading(false);// Set loading to false when all data is fetched\nif(res&&res.errCode===0){toast.success(\"Thêm chủ đề thành công\");setInputValues(_objectSpread(_objectSpread({},inputValues),{},(_objectSpread4={},_defineProperty(_objectSpread4,\"value\",''),_defineProperty(_objectSpread4,\"code\",''),_objectSpread4)));}else if(res&&res.errCode===2){toast.error(res.errMessage);}else toast.error(\"Thêm chủ đề thất bại\");_context2.next=15;break;case 9:setIsLoading(true);// Start loading\n_context2.next=12;return UpdateAllcodeService({value:inputValues.value,code:inputValues.code,id:id});case 12:_res=_context2.sent;setIsLoading(false);// Set loading to false when all data is fetched\nif(_res&&_res.errCode===0){toast.success(\"Cập nhật chủ đề thành công\");}else if(_res&&_res.errCode===2){toast.error(_res.errMessage);}else toast.error(\"Cập nhật chủ đề thất bại\");case 15:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSaveSubject(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid px-4\",children:[isLoading&&/*#__PURE__*/_jsx(LoadingSpinner,{}),/*#__PURE__*/_jsx(\"h1\",{className:\"mt-4\",children:\"Qu\\u1EA3n l\\xFD ch\\u1EE7 \\u0111\\u1EC1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-table me-1\"}),isActionADD===true?'Thêm mới chủ đề':'Cập nhật thông tin chủ đề']}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputEmail4\",children:\"T\\xEAn ch\\u1EE7 \\u0111\\u1EC1\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputValues.value,name:\"value\",onChange:function onChange(event){return handleOnChange(event);},className:\"form-control\",id:\"inputEmail4\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputPassword4\",children:\"M\\xE3 code\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputValues.code,name:\"code\",onChange:function onChange(event){return handleOnChange(event);},className:\"form-control\",id:\"inputPassword4\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return handleSaveSubject();},className:\"btn btn-primary\",children:\"L\\u01B0u th\\xF4ng tin\"})]})})]})]});};export default AddSubject;","map":{"version":3,"names":["React","useEffect","useState","createAllCodeService","getDetailAllcodeById","UpdateAllcodeService","toast","useParams","LoadingSpinner","moment","AddSubject","props","isLoading","setIsLoading","isActionADD","setisActionADD","id","value","code","inputValues","setInputValues","fetchDetailSubject","allcode","errCode","data","handleOnChange","event","target","name","handleSaveSubject","type","res","success","error","errMessage"],"sources":["E:/TestDeploy/front-end/src/container/System/Subject/AddSubject.js"],"sourcesContent":["import React from 'react';\r\nimport { useEffect, useState } from 'react';\r\nimport { createAllCodeService, getDetailAllcodeById, UpdateAllcodeService } from '../../../services/userService';\r\n\r\nimport { toast } from 'react-toastify';\r\nimport { useParams } from \"react-router-dom\";\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport LoadingSpinner from '../../../component/Spinner/LoadingSpinner';\r\nimport moment from 'moment';\r\nconst AddSubject = (props) => {\r\n\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const [isActionADD, setisActionADD] = useState(true)\r\n\r\n\r\n    const { id } = useParams();\r\n\r\n    const [inputValues, setInputValues] = useState({\r\n        value: '', code: ''\r\n    });\r\n    useEffect(() => {\r\n\r\n        if (id) {\r\n            let fetchDetailSubject = async () => {\r\n                setisActionADD(false)\r\n                setIsLoading(true); // Start loading\r\n                let allcode = await getDetailAllcodeById(id)\r\n                setIsLoading(false); // Set loading to false when all data is fetchedv\r\n                if (allcode && allcode.errCode === 0) {\r\n                    setInputValues({ ...inputValues, [\"value\"]: allcode.data.value, [\"code\"]: allcode.data.code })\r\n                }\r\n            }\r\n            fetchDetailSubject()\r\n        }\r\n    }, [])\r\n\r\n    const handleOnChange = event => {\r\n        const { name, value } = event.target;\r\n        setInputValues({ ...inputValues, [name]: value });\r\n\r\n    };\r\n    let handleSaveSubject = async () => {\r\n        if (isActionADD === true) {\r\n            setIsLoading(true); // Start loading\r\n            let res = await createAllCodeService({\r\n                value: inputValues.value,\r\n                code: inputValues.code,\r\n                type: 'SUBJECT'\r\n            })\r\n            setIsLoading(false); // Set loading to false when all data is fetched\r\n            if (res && res.errCode === 0) {\r\n                toast.success(\"Thêm chủ đề thành công\")\r\n                setInputValues({\r\n                    ...inputValues,\r\n                    [\"value\"]: '',\r\n                    [\"code\"]: ''\r\n                })\r\n            }\r\n            else if (res && res.errCode === 2) {\r\n                toast.error(res.errMessage)\r\n            }\r\n            else toast.error(\"Thêm chủ đề thất bại\")\r\n        } else {\r\n            setIsLoading(true); // Start loading\r\n            let res = await UpdateAllcodeService({\r\n                value: inputValues.value,\r\n                code: inputValues.code,\r\n                id: id\r\n            })\r\n            setIsLoading(false); // Set loading to false when all data is fetched\r\n            if (res && res.errCode === 0) {\r\n                toast.success(\"Cập nhật chủ đề thành công\")\r\n\r\n            }\r\n            else if (res && res.errCode === 2) {\r\n                toast.error(res.errMessage)\r\n            }\r\n            else toast.error(\"Cập nhật chủ đề thất bại\")\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"container-fluid px-4\">\r\n                 {isLoading && <LoadingSpinner />}\r\n            <h1 className=\"mt-4\">Quản lý chủ đề</h1>\r\n\r\n\r\n            <div className=\"card mb-4\">\r\n                <div className=\"card-header\">\r\n                    <i className=\"fas fa-table me-1\" />\r\n                    {isActionADD === true ? 'Thêm mới chủ đề' : 'Cập nhật thông tin chủ đề'}\r\n                </div>\r\n                <div className=\"card-body\">\r\n                    <form>\r\n                        <div className=\"form-row\">\r\n                            <div className=\"form-group col-md-6\">\r\n                                <label htmlFor=\"inputEmail4\">Tên chủ đề</label>\r\n                                <input type=\"text\" value={inputValues.value} name=\"value\" onChange={(event) => handleOnChange(event)} className=\"form-control\" id=\"inputEmail4\" />\r\n                            </div>\r\n                            <div className=\"form-group col-md-6\">\r\n                                <label htmlFor=\"inputPassword4\">Mã code</label>\r\n                                <input type=\"text\" value={inputValues.code} name=\"code\" onChange={(event) => handleOnChange(event)} className=\"form-control\" id=\"inputPassword4\" />\r\n                            </div>\r\n                        </div>\r\n                        <button type=\"button\" onClick={() => handleSaveSubject()} className=\"btn btn-primary\">Lưu thông tin</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default AddSubject;"],"mappings":"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"},"metadata":{},"sourceType":"module"}