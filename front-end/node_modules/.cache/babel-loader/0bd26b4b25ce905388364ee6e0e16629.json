{"ast":null,"code":"import _regeneratorRuntime from\"E:/TestDeploy/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/TestDeploy/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/TestDeploy/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Link,useParams}from\"react-router-dom\";import{getDetailProductByIdService,getProductRecommendService}from'../../services/userService';import ImgDetailProduct from'../../component/Product/ImgDetailProduct';import InfoDetailProduct from'../../component/Product/InfoDetailProduct';import CommentProduct from'../../component/Product/CommentProduct';import ProfileProduct from'../../component/Product/ProfileProduct';import ReviewProduct from'../../component/Product/ReviewProduct';import DescriptionProduct from'../../component/Product/DescriptionProduct';import NewProductFeature from\"../../component/HomeFeature/NewProductFeature\";import ProductFeature from'../../component/HomeFeature/ProductFeature';import LoadingSpinner from'../../component/Spinner/LoadingSpinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function DetailProductPage(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),dataProduct=_useState4[0],setDataProduct=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),dataDetailSize=_useState6[0],setdataDetailSize=_useState6[1];var _useParams=useParams(),id=_useParams.id;var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),user=_useState8[0],setUser=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),dataProductRecommend=_useState10[0],setdataProductRecommend=_useState10[1];useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var userData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);// Start loading\nuserData=JSON.parse(localStorage.getItem('userData'));if(!userData){_context.next=6;break;}_context.next=5;return fetchProductFeature(userData.id);case 5:setUser(userData);case 6:window.scrollTo(0,0);_context.next=9;return fetchDetailProduct();case 9:setIsLoading(false);// End loading after all fetches\ncase 10:case\"end\":return _context.stop();}}},_callee);})),[]);var sendDataFromInforDetail=function sendDataFromInforDetail(data){setdataDetailSize(data);};var fetchDetailProduct=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getDetailProductByIdService(id);case 2:res=_context2.sent;if(res&&res.errCode===0){setDataProduct(res.data);}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchDetailProduct(){return _ref2.apply(this,arguments);};}();var fetchProductFeature=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(userId){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getProductRecommendService({limit:20,userId:userId});case 2:res=_context3.sent;if(res&&res.errCode===0){setdataProductRecommend(res.data);}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchProductFeature(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"section\",{className:\"banner_area\",children:/*#__PURE__*/_jsx(\"div\",{className:\"banner_inner d-flex align-items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"banner_content d-md-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 mb-md-0\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Chi ti\\u1EBFt s\\u1EA3n ph\\u1EA9m\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Th\\xF4ng s\\u1ED1 chi ti\\u1EBFt v\\u1EC1 s\\u1EA3n ph\\u1EA9m\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"page_link\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Trang ch\\u1EE7\"}),/*#__PURE__*/_jsx(Link,{to:\"/shop\",children:\"C\\u1EEDa h\\xE0ng\"})]})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"product_image_area\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(InfoDetailProduct,{userId:user&&user.id?user.id:'',dataProduct:dataProduct,sendDataFromInforDetail:sendDataFromInforDetail,children:\" \"})})}),/*#__PURE__*/_jsxs(\"section\",{className:\"product_description_area\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"nav nav-tabs\",id:\"myTab\",role:\"tablist\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"a\",{className:\"nav-link active\",id:\"profile-tab\",\"data-toggle\":\"tab\",href:\"#profile\",role:\"tab\",\"aria-controls\":\"profile\",\"aria-selected\":\"false\",children:\"Th\\xF4ng s\\u1ED1 chi ti\\u1EBFt\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"a\",{className:\"nav-link \",id:\"home-tab\",\"data-toggle\":\"tab\",href:\"#home\",role:\"tab\",\"aria-controls\":\"home\",\"aria-selected\":\"true\",children:\"M\\xF4 t\\u1EA3 chi ti\\u1EBFt\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"a\",{className:\"nav-link\",id:\"review-tab\",\"data-toggle\":\"tab\",href:\"#review\",role:\"tab\",\"aria-controls\":\"review\",\"aria-selected\":\"false\",children:\"\\u0110\\xE1nh gi\\xE1\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",id:\"myTabContent\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tab-pane fade show active\",id:\"profile\",role:\"tabpanel\",\"aria-labelledby\":\"profile-tab\",children:/*#__PURE__*/_jsx(ProfileProduct,{data:dataDetailSize})}),/*#__PURE__*/_jsx(\"div\",{className:\"tab-pane fade \",id:\"home\",role:\"tabpanel\",\"aria-labelledby\":\"home-tab\",children:/*#__PURE__*/_jsx(DescriptionProduct,{data:dataProduct.contentHTML})}),/*#__PURE__*/_jsx(\"div\",{className:\"tab-pane fade\",id:\"review\",role:\"tabpanel\",\"aria-labelledby\":\"review-tab\",children:/*#__PURE__*/_jsx(ReviewProduct,{})})]})]}),user&&dataProductRecommend&&dataProductRecommend.length>0&&/*#__PURE__*/_jsx(ProductFeature,{title:\"Sản phẩm bạn quan tâm\",data:dataProductRecommend})]}),isLoading&&/*#__PURE__*/_jsx(LoadingSpinner,{})]});}export default DetailProductPage;","map":{"version":3,"names":["React","useEffect","useState","Link","useParams","getDetailProductByIdService","getProductRecommendService","ImgDetailProduct","InfoDetailProduct","CommentProduct","ProfileProduct","ReviewProduct","DescriptionProduct","NewProductFeature","ProductFeature","LoadingSpinner","DetailProductPage","props","isLoading","setIsLoading","dataProduct","setDataProduct","dataDetailSize","setdataDetailSize","id","user","setUser","dataProductRecommend","setdataProductRecommend","userData","JSON","parse","localStorage","getItem","fetchProductFeature","window","scrollTo","fetchDetailProduct","sendDataFromInforDetail","data","res","errCode","userId","limit","contentHTML","length"],"sources":["E:/TestDeploy/front-end/src/container/DetailProduct/DetailProductPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport { getDetailProductByIdService, getProductRecommendService } from '../../services/userService';\r\nimport ImgDetailProduct from '../../component/Product/ImgDetailProduct';\r\nimport InfoDetailProduct from '../../component/Product/InfoDetailProduct';\r\nimport CommentProduct from '../../component/Product/CommentProduct';\r\nimport ProfileProduct from '../../component/Product/ProfileProduct';\r\nimport ReviewProduct from '../../component/Product/ReviewProduct';\r\nimport DescriptionProduct from '../../component/Product/DescriptionProduct';\r\nimport NewProductFeature from \"../../component/HomeFeature/NewProductFeature\"\r\nimport ProductFeature from '../../component/HomeFeature/ProductFeature';\r\nimport LoadingSpinner from '../../component/Spinner/LoadingSpinner';\r\nfunction DetailProductPage(props) {\r\n\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [dataProduct, setDataProduct] = useState({})\r\n    const [dataDetailSize, setdataDetailSize] = useState({})\r\n    const { id } = useParams();\r\n    const [user, setUser] = useState({})\r\n    const [dataProductRecommend, setdataProductRecommend] = useState([])\r\n    useEffect(async () => {\r\n        setIsLoading(true); // Start loading\r\n        const userData = JSON.parse(localStorage.getItem('userData'));\r\n        if (userData) {\r\n            await fetchProductFeature(userData.id)\r\n            setUser(userData)\r\n        }\r\n\r\n        window.scrollTo(0, 0);\r\n\r\n\r\n        await fetchDetailProduct()\r\n\r\n        setIsLoading(false); // End loading after all fetches\r\n    }, [])\r\n    let sendDataFromInforDetail = (data) => {\r\n        setdataDetailSize(data)\r\n    }\r\n    let fetchDetailProduct = async () => {\r\n       \r\n        let res = await getDetailProductByIdService(id)\r\n        if (res && res.errCode === 0) {\r\n            setDataProduct(res.data)\r\n        }\r\n    }\r\n    let fetchProductFeature = async (userId) => {\r\n        let res = await getProductRecommendService({\r\n            limit: 20,\r\n            userId: userId\r\n        })\r\n        if (res && res.errCode === 0) {\r\n            setdataProductRecommend(res.data)\r\n        }\r\n       \r\n    }\r\n    return (\r\n\r\n        <div>\r\n            <section className=\"banner_area\">\r\n                <div className=\"banner_inner d-flex align-items-center\">\r\n                    <div className=\"container\">\r\n                        <div className=\"banner_content d-md-flex justify-content-between align-items-center\">\r\n                            <div className=\"mb-3 mb-md-0\">\r\n                                <h2>Chi tiết sản phẩm</h2>\r\n                                <p>\r\n                                    Thông số chi tiết về sản phẩm\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"page_link\">\r\n                                <Link to={\"/\"}>Trang chủ</Link>\r\n                                <Link to={\"/shop\"}>Cửa hàng</Link>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div className=\"product_image_area\">\r\n                <div className=\"container\">\r\n\r\n                    <InfoDetailProduct userId={user && user.id ? user.id : ''} dataProduct={dataProduct} sendDataFromInforDetail={sendDataFromInforDetail} > </InfoDetailProduct>\r\n\r\n\r\n                </div>\r\n            </div>\r\n            <section className=\"product_description_area\">\r\n                <div className=\"container\">\r\n                    <ul className=\"nav nav-tabs\" id=\"myTab\" role=\"tablist\">\r\n                        <li className=\"nav-item\">\r\n                            <a className=\"nav-link active\" id=\"profile-tab\" data-toggle=\"tab\" href=\"#profile\"\r\n                                role=\"tab\" aria-controls=\"profile\" aria-selected=\"false\">Thông số chi tiết</a>\r\n                        </li>\r\n                        <li className=\"nav-item\">\r\n                            <a className=\"nav-link \" id=\"home-tab\" data-toggle=\"tab\" href=\"#home\" role=\"tab\" aria-controls=\"home\" aria-selected=\"true\">Mô tả chi tiết</a>\r\n                        </li>\r\n\r\n\r\n                        <li className=\"nav-item\">\r\n                            <a className=\"nav-link\" id=\"review-tab\" data-toggle=\"tab\" href=\"#review\"\r\n                                role=\"tab\" aria-controls=\"review\" aria-selected=\"false\">Đánh giá</a>\r\n                        </li>\r\n\r\n                    </ul>\r\n                    <div className=\"tab-content\" id=\"myTabContent\">\r\n                        <div className=\"tab-pane fade show active\" id=\"profile\" role=\"tabpanel\" aria-labelledby=\"profile-tab\">\r\n\r\n                            < ProfileProduct data={dataDetailSize} />\r\n\r\n                        </div>\r\n                        <div className=\"tab-pane fade \" id=\"home\" role=\"tabpanel\" aria-labelledby=\"home-tab\">\r\n                            <DescriptionProduct data={dataProduct.contentHTML} />\r\n                        </div>\r\n\r\n\r\n                        <div className=\"tab-pane fade\" id=\"review\" role=\"tabpanel\" aria-labelledby=\"review-tab\">\r\n                            <ReviewProduct />\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n                {user && dataProductRecommend && dataProductRecommend.length > 0 &&\r\n                    <ProductFeature title={\"Sản phẩm bạn quan tâm\"} data={dataProductRecommend}></ProductFeature>\r\n\r\n                }\r\n            </section>\r\n            {isLoading && <LoadingSpinner />}\r\n\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default DetailProductPage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}