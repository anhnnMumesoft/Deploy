{"ast":null,"code":"import _objectSpread from\"E:/TestDeploy/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:/TestDeploy/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/TestDeploy/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/TestDeploy/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import HomeBanner from\"../../component/HomeFeature/HomeBanner\";import MainFeature from\"../../component/HomeFeature/MainFeature\";import ProductFeature from\"../../component/HomeFeature/ProductFeature\";import NewProductFeature from\"../../component/HomeFeature/NewProductFeature\";import HomeBlog from'../../component/HomeFeature/HomeBlog';import{getAllBanner,getProductFeatureService,getProductNewService,getNewBlog,getProductRecommendService}from'../../services/userService';import Slider from'react-slick';import\"slick-carousel/slick/slick.css\";import\"slick-carousel/slick/slick-theme.css\";import LoadingSpinner from'../../component/Spinner/LoadingSpinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function HomePage(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),dataProductFeature=_useState4[0],setDataProductFeature=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),dataNewProductFeature=_useState6[0],setNewProductFeature=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),dataNewBlog=_useState8[0],setdataNewBlog=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),dataBanner=_useState10[0],setdataBanner=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),dataProductRecommend=_useState12[0],setdataProductRecommend=_useState12[1];var settings={dots:false,Infinity:false,speed:500,slidesToShow:1,slidesToScroll:1,autoplaySpeed:2000,autoplay:true,cssEase:\"linear\"};useEffect(function(){var userData=JSON.parse(localStorage.getItem('userData'));setIsLoading(true);// Start loading\nvar fetchAllData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([fetchBlogFeature(),fetchDataBrand(),fetchProductFeature(),fetchProductNew()]);case 2:setIsLoading(false);// End loading after all fetches\ncase 3:case\"end\":return _context.stop();}}},_callee);}));return function fetchAllData(){return _ref.apply(this,arguments);};}();fetchAllData();window.scrollTo(0,0);},[]);var fetchBlogFeature=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getNewBlog(3);case 2:res=_context2.sent;if(res&&res.errCode===0){setdataNewBlog(res.data);}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchBlogFeature(){return _ref2.apply(this,arguments);};}();var fetchProductFeature=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getProductFeatureService(6);case 2:res=_context3.sent;if(res&&res.errCode===0){setDataProductFeature(res.data);}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchProductFeature(){return _ref3.apply(this,arguments);};}();// let fetchProductRecommend = async (userId) => {\n//     let res = await getProductRecommendService({\n//         limit: 20,\n//         userId: userId\n//     })\n//     if (res && res.errCode === 0) {\n//         setdataProductRecommend(res.data)\n//     }\n// }\nvar fetchDataBrand=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return getAllBanner({limit:6,offset:0,keyword:''});case 2:res=_context4.sent;if(res&&res.errCode===0){setdataBanner(res.data);}case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function fetchDataBrand(){return _ref4.apply(this,arguments);};}();var fetchProductNew=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return getProductNewService(8);case 2:res=_context5.sent;if(res&&res.errCode===0){setNewProductFeature(res.data);}case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function fetchProductNew(){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Slider,_objectSpread(_objectSpread({},settings),{},{children:dataBanner&&dataBanner.length>0&&dataBanner.map(function(item,index){return/*#__PURE__*/_jsx(HomeBanner,{image:item.image,name:item.name});})})),/*#__PURE__*/_jsx(MainFeature,{}),/*#__PURE__*/_jsx(ProductFeature,{title:\"Sản phẩm đặc trưng\",data:dataProductFeature}),/*#__PURE__*/_jsx(NewProductFeature,{title:\"S\\u1EA3n ph\\u1EA9m m\\u1EDBi\",description:\"Nh\\u1EEFng s\\u1EA3n ph\\u1EA9m v\\u1EEBa ra m\\u1EAFt m\\u1EDBi l\\u1EA1 cu\\u1ED1n h\\xFAt ng\\u01B0\\u1EDDi xem\",data:dataNewProductFeature}),/*#__PURE__*/_jsx(HomeBlog,{data:dataNewBlog}),isLoading&&/*#__PURE__*/_jsx(LoadingSpinner,{})]});}export default HomePage;","map":{"version":3,"names":["React","useState","useEffect","useContext","HomeBanner","MainFeature","ProductFeature","NewProductFeature","HomeBlog","getAllBanner","getProductFeatureService","getProductNewService","getNewBlog","getProductRecommendService","Slider","LoadingSpinner","HomePage","props","isLoading","setIsLoading","dataProductFeature","setDataProductFeature","dataNewProductFeature","setNewProductFeature","dataNewBlog","setdataNewBlog","dataBanner","setdataBanner","dataProductRecommend","setdataProductRecommend","settings","dots","Infinity","speed","slidesToShow","slidesToScroll","autoplaySpeed","autoplay","cssEase","userData","JSON","parse","localStorage","getItem","fetchAllData","Promise","all","fetchBlogFeature","fetchDataBrand","fetchProductFeature","fetchProductNew","window","scrollTo","res","errCode","data","limit","offset","keyword","length","map","item","index","image","name"],"sources":["E:/TestDeploy/front-end/src/container/Home/HomePage.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport HomeBanner from \"../../component/HomeFeature/HomeBanner\";\r\nimport MainFeature from \"../../component/HomeFeature/MainFeature\";\r\nimport ProductFeature from \"../../component/HomeFeature/ProductFeature\";\r\nimport NewProductFeature from \"../../component/HomeFeature/NewProductFeature\"\r\nimport HomeBlog from '../../component/HomeFeature/HomeBlog';\r\nimport { getAllBanner, getProductFeatureService, getProductNewService, getNewBlog, getProductRecommendService } from '../../services/userService';\r\nimport Slider from 'react-slick';\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\nimport LoadingSpinner from '../../component/Spinner/LoadingSpinner';\r\nfunction HomePage(props) {\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [dataProductFeature, setDataProductFeature] = useState([])\r\n    const [dataNewProductFeature, setNewProductFeature] = useState([])\r\n    const [dataNewBlog, setdataNewBlog] = useState([])\r\n    const [dataBanner, setdataBanner] = useState([])\r\n    const [dataProductRecommend, setdataProductRecommend] = useState([])\r\n    let settings = {\r\n        dots: false,\r\n        Infinity: false,\r\n        speed: 500,\r\n        slidesToShow: 1,\r\n        slidesToScroll: 1,\r\n        autoplaySpeed: 2000,\r\n        autoplay: true,\r\n        cssEase: \"linear\"\r\n    }\r\n\r\n    useEffect(() => {\r\n        const userData = JSON.parse(localStorage.getItem('userData'));\r\n        setIsLoading(true); // Start loading\r\n    \r\n        const fetchAllData = async () => {\r\n            // if (userData) {\r\n            //     await fetchProductRecommend(userData.id);\r\n            // }\r\n            await Promise.all([\r\n                fetchBlogFeature(),\r\n                fetchDataBrand(),\r\n                fetchProductFeature(),\r\n                fetchProductNew()\r\n            ]);\r\n            setIsLoading(false); // End loading after all fetches\r\n        };\r\n    \r\n        fetchAllData();\r\n        window.scrollTo(0, 0);\r\n    }, []);\r\n    let fetchBlogFeature = async () => {\r\n        let res = await getNewBlog(3)\r\n        if (res && res.errCode === 0) {\r\n            setdataNewBlog(res.data)\r\n        }\r\n    }\r\n    let fetchProductFeature = async () => {\r\n        let res = await getProductFeatureService(6)\r\n        if (res && res.errCode === 0) {\r\n            setDataProductFeature(res.data)\r\n        }\r\n    }\r\n    // let fetchProductRecommend = async (userId) => {\r\n    //     let res = await getProductRecommendService({\r\n    //         limit: 20,\r\n    //         userId: userId\r\n    //     })\r\n    //     if (res && res.errCode === 0) {\r\n    //         setdataProductRecommend(res.data)\r\n    //     }\r\n    // }\r\n    let fetchDataBrand = async () => {\r\n        let res = await getAllBanner({\r\n            limit: 6,\r\n            offset: 0,\r\n            keyword: ''\r\n        })\r\n        if (res && res.errCode === 0) {\r\n            setdataBanner(res.data)\r\n        }\r\n    }\r\n    let fetchProductNew = async () => {\r\n        let res = await getProductNewService(8)\r\n        if (res && res.errCode === 0) {\r\n            setNewProductFeature(res.data)\r\n        }\r\n    }\r\n    return (\r\n        <div>\r\n            <Slider {...settings}>\r\n                {dataBanner && dataBanner.length > 0 &&\r\n                    dataBanner.map((item, index) => {\r\n                        return (\r\n                            <HomeBanner image={item.image} name={item.name}></HomeBanner>\r\n                        )\r\n                    })\r\n                }\r\n\r\n\r\n            </Slider>\r\n\r\n\r\n            <MainFeature></MainFeature>\r\n            {/* <ProductFeature title={\"Gợi ý sản phẩm\"} data={dataProductRecommend}></ProductFeature> */}\r\n            <ProductFeature title={\"Sản phẩm đặc trưng\"} data={dataProductFeature}></ProductFeature>\r\n            <NewProductFeature title=\"Sản phẩm mới\" description=\"Những sản phẩm vừa ra mắt mới lạ cuốn hút người xem\" data={dataNewProductFeature}></NewProductFeature>\r\n            <HomeBlog data={dataNewBlog} />\r\n            {isLoading && <LoadingSpinner />}\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default HomePage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}