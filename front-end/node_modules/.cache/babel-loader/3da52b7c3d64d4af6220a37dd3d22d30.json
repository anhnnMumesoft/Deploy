{"ast":null,"code":"import _regeneratorRuntime from\"E:/TestDeploy/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"E:/TestDeploy/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:/TestDeploy/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"E:/TestDeploy/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/TestDeploy/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useEffect,useState}from'react';import{createNewSupplierService,getDetailSupplierByIdService,updateSupplierService}from'../../../services/userService';import{toast}from'react-toastify';import{useParams}from\"react-router-dom\";import'react-toastify/dist/ReactToastify.css';import LoadingSpinner from'../../../component/Spinner/LoadingSpinner';import moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddSupplier=function AddSupplier(props){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isActionADD=_useState2[0],setisActionADD=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useParams=useParams(),id=_useParams.id;var _useState5=useState({name:'',address:'',phonenumber:'',email:''}),_useState6=_slicedToArray(_useState5,2),inputValues=_useState6[0],setInputValues=_useState6[1];useEffect(function(){if(id){var fetchDetailSupplier=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var supplier,_objectSpread2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setisActionADD(false);setIsLoading(true);// Start loading\n_context.next=4;return getDetailSupplierByIdService(id);case 4:supplier=_context.sent;setIsLoading(false);// Set loading to false when all data is fetched\nif(supplier&&supplier.errCode===0){setInputValues(_objectSpread(_objectSpread({},inputValues),{},(_objectSpread2={},_defineProperty(_objectSpread2,\"name\",supplier.data.name),_defineProperty(_objectSpread2,\"address\",supplier.data.address),_defineProperty(_objectSpread2,\"phonenumber\",supplier.data.phonenumber),_defineProperty(_objectSpread2,\"email\",supplier.data.email),_objectSpread2)));}case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchDetailSupplier(){return _ref.apply(this,arguments);};}();fetchDetailSupplier();}},[]);var handleOnChange=function handleOnChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setInputValues(_objectSpread(_objectSpread({},inputValues),{},_defineProperty({},name,value)));};var handleSaveSupplier=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,_objectSpread4,_res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(isActionADD===true)){_context2.next=9;break;}setIsLoading(true);// Start loading\n_context2.next=4;return createNewSupplierService({name:inputValues.name,address:inputValues.address,email:inputValues.email,phonenumber:inputValues.phonenumber});case 4:res=_context2.sent;setIsLoading(false);// Set loading to false when all data is fetched\nif(res&&res.errCode===0){toast.success(\"Thêm nhà cung cấp thành công\");setInputValues(_objectSpread(_objectSpread({},inputValues),{},(_objectSpread4={},_defineProperty(_objectSpread4,\"name\",''),_defineProperty(_objectSpread4,\"address\",''),_defineProperty(_objectSpread4,\"email\",''),_defineProperty(_objectSpread4,\"phonenumber\",''),_objectSpread4)));}else if(res&&res.errCode===2){toast.error(res.errMessage);}else toast.error(\"Thêm nhà cung cấp thất bại\");_context2.next=15;break;case 9:setIsLoading(true);// Start loading\n_context2.next=12;return updateSupplierService({name:inputValues.name,address:inputValues.address,email:inputValues.email,phonenumber:inputValues.phonenumber,id:id});case 12:_res=_context2.sent;setIsLoading(false);// Set loading to false when all data is fetched\nif(_res&&_res.errCode===0){toast.success(\"Cập nhật nhà cung cấp thành công\");}else if(_res&&_res.errCode===2){toast.error(_res.errMessage);}else toast.error(\"Cập nhật nhà cung cấp thất bại\");case 15:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSaveSupplier(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid px-4\",children:[isLoading&&/*#__PURE__*/_jsx(LoadingSpinner,{}),/*#__PURE__*/_jsx(\"h1\",{className:\"mt-4\",children:\"Qu\\u1EA3n l\\xFD nh\\xE0 cung c\\u1EA5p\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-table me-1\"}),isActionADD===true?'Thêm mới nhà cung cấp':'Cập nhật thông tin nhà cung cấp']}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputEmail4\",children:\"T\\xEAn nh\\xE0 cung c\\u1EA5p\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputValues.name,name:\"name\",onChange:function onChange(event){return handleOnChange(event);},className:\"form-control\",id:\"inputEmail4\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputPassword4\",children:\"\\u0110\\u1ECBa ch\\u1EC9 email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputValues.email,name:\"email\",onChange:function onChange(event){return handleOnChange(event);},className:\"form-control\",id:\"inputPassword4\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputEmail4\",children:\"\\u0110\\u1ECBa ch\\u1EC9\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputValues.address,name:\"address\",onChange:function onChange(event){return handleOnChange(event);},className:\"form-control\",id:\"inputEmail4\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputPassword4\",children:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputValues.phonenumber,name:\"phonenumber\",onChange:function onChange(event){return handleOnChange(event);},className:\"form-control\",id:\"inputPassword4\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return handleSaveSupplier();},className:\"btn btn-primary\",children:\"L\\u01B0u th\\xF4ng tin\"})]})})]})]});};export default AddSupplier;","map":{"version":3,"names":["React","useEffect","useState","createNewSupplierService","getDetailSupplierByIdService","updateSupplierService","toast","useParams","LoadingSpinner","moment","AddSupplier","props","isActionADD","setisActionADD","isLoading","setIsLoading","id","name","address","phonenumber","email","inputValues","setInputValues","fetchDetailSupplier","supplier","errCode","data","handleOnChange","event","target","value","handleSaveSupplier","res","success","error","errMessage"],"sources":["E:/TestDeploy/front-end/src/container/System/Supplier/AddSupplier.js"],"sourcesContent":["import React from 'react';\r\nimport { useEffect, useState } from 'react';\r\nimport { createNewSupplierService, getDetailSupplierByIdService, updateSupplierService } from '../../../services/userService';\r\n\r\nimport { toast } from 'react-toastify';\r\nimport { useParams } from \"react-router-dom\";\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport LoadingSpinner from '../../../component/Spinner/LoadingSpinner';\r\nimport moment from 'moment';\r\nconst AddSupplier = (props) => {\r\n\r\n\r\n\r\n    const [isActionADD, setisActionADD] = useState(true)\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const { id } = useParams();\r\n\r\n    const [inputValues, setInputValues] = useState({\r\n        name: '', address: '',phonenumber: '',email: ''\r\n    });\r\n    useEffect(() => {\r\n\r\n        if (id) {\r\n            let fetchDetailSupplier = async () => {\r\n                setisActionADD(false)\r\n                setIsLoading(true); // Start loading\r\n                let supplier = await getDetailSupplierByIdService(id)\r\n                setIsLoading(false); // Set loading to false when all data is fetched\r\n                if (supplier && supplier.errCode === 0) {\r\n                    setInputValues({ ...inputValues, \r\n                        [\"name\"]: supplier.data.name, \r\n                        [\"address\"]: supplier.data.address,\r\n                        [\"phonenumber\"]: supplier.data.phonenumber,\r\n                        [\"email\"]: supplier.data.email\r\n                    })\r\n                }\r\n            }\r\n            fetchDetailSupplier()\r\n        }\r\n    }, [])\r\n\r\n    const handleOnChange = event => {\r\n        const { name, value } = event.target;\r\n        setInputValues({ ...inputValues, [name]: value });\r\n\r\n    };\r\n    let handleSaveSupplier = async () => {\r\n        if (isActionADD === true) {\r\n            setIsLoading(true); // Start loading\r\n            let res = await createNewSupplierService({\r\n                name: inputValues.name,\r\n                address: inputValues.address,\r\n                email: inputValues.email,\r\n                phonenumber: inputValues.phonenumber,\r\n            })\r\n            setIsLoading(false); // Set loading to false when all data is fetched\r\n            if (res && res.errCode === 0) {\r\n                toast.success(\"Thêm nhà cung cấp thành công\")\r\n                setInputValues({\r\n                    ...inputValues,\r\n                    [\"name\"]: '',\r\n                    [\"address\"]: '',\r\n                    [\"email\"]: '',\r\n                    [\"phonenumber\"]: ''\r\n                })\r\n            }\r\n            else if (res && res.errCode === 2) {\r\n                toast.error(res.errMessage)\r\n            }\r\n            else toast.error(\"Thêm nhà cung cấp thất bại\")\r\n        } else {\r\n            setIsLoading(true); // Start loading\r\n            let res = await updateSupplierService({\r\n                name: inputValues.name,\r\n                address: inputValues.address,\r\n                email: inputValues.email,\r\n                phonenumber: inputValues.phonenumber,\r\n                id: id\r\n            })\r\n            setIsLoading(false); // Set loading to false when all data is fetched\r\n            if (res && res.errCode === 0) {\r\n                toast.success(\"Cập nhật nhà cung cấp thành công\")\r\n\r\n            }\r\n            else if (res && res.errCode === 2) {\r\n                toast.error(res.errMessage)\r\n            }\r\n            else toast.error(\"Cập nhật nhà cung cấp thất bại\")\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"container-fluid px-4\">\r\n                 {isLoading && <LoadingSpinner />}\r\n            <h1 className=\"mt-4\">Quản lý nhà cung cấp</h1>\r\n\r\n\r\n            <div className=\"card mb-4\">\r\n                <div className=\"card-header\">\r\n                    <i className=\"fas fa-table me-1\" />\r\n                    {isActionADD === true ? 'Thêm mới nhà cung cấp' : 'Cập nhật thông tin nhà cung cấp'}\r\n                </div>\r\n                <div className=\"card-body\">\r\n                    <form>\r\n                        <div className=\"form-row\">\r\n                            <div className=\"form-group col-md-6\">\r\n                                <label htmlFor=\"inputEmail4\">Tên nhà cung cấp</label>\r\n                                <input type=\"text\" value={inputValues.name} name=\"name\" onChange={(event) => handleOnChange(event)} className=\"form-control\" id=\"inputEmail4\" />\r\n                            </div>\r\n                            <div className=\"form-group col-md-6\">\r\n                                <label htmlFor=\"inputPassword4\">Địa chỉ email</label>\r\n                                <input type=\"text\" value={inputValues.email} name=\"email\" onChange={(event) => handleOnChange(event)} className=\"form-control\" id=\"inputPassword4\" />\r\n                            </div>\r\n                            <div className=\"form-group col-md-6\">\r\n                                <label htmlFor=\"inputEmail4\">Địa chỉ</label>\r\n                                <input type=\"text\" value={inputValues.address} name=\"address\" onChange={(event) => handleOnChange(event)} className=\"form-control\" id=\"inputEmail4\" />\r\n                            </div>\r\n                            <div className=\"form-group col-md-6\">\r\n                                <label htmlFor=\"inputPassword4\">Số điện thoại</label>\r\n                                <input type=\"text\" value={inputValues.phonenumber} name=\"phonenumber\" onChange={(event) => handleOnChange(event)} className=\"form-control\" id=\"inputPassword4\" />\r\n                            </div>\r\n                        </div>\r\n                        <button type=\"button\" onClick={() => handleSaveSupplier()} className=\"btn btn-primary\">Lưu thông tin</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default AddSupplier;"],"mappings":"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"},"metadata":{},"sourceType":"module"}