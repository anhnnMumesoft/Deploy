{"ast":null,"code":"import axios from \"axios\";\nimport _ from \"lodash\";\nimport React, { createContext, useContext, useState } from 'react';\nimport { LoadingContext } from './component/LoadingContext';\n\nrequire(\"dotenv\").config();\n\nconst {\n  setIsLoading\n} = useContext(LoadingContext);\nconst instance = axios.create({\n  baseURL: process.env.REACT_APP_BACKEND_URL //  withCredentials: true\n\n});\n\nif (localStorage.getItem(\"token\")) {\n  instance.interceptors.request.use(config => {\n    config.headers.authorization = \"Bearer \" + localStorage.getItem(\"token\").replaceAll('\"', \"\");\n    setIsLoading(true); // Đặt tải thành true khi yêu cầu bắt đầu\n\n    return config;\n  }, error => {\n    setIsLoading(false); // Đặt tải thành false khi có lỗi yêu cầu\n\n    return Promise.reject(error);\n  });\n}\n\ninstance.interceptors.response.use(response => {\n  setIsLoading(false); // Đặt tải thành false khi nhận phản hồi\n  // Thrown error for request with OK status code\n\n  const {\n    data\n  } = response;\n  return response.data;\n}, error => {\n  setIsLoading(false); // Đảm bảo tải được đặt thành false khi có lỗi phản hồi\n\n  return Promise.reject(error);\n});\nexport default instance;","map":{"version":3,"names":["axios","_","React","createContext","useContext","useState","LoadingContext","require","config","setIsLoading","instance","create","baseURL","process","env","REACT_APP_BACKEND_URL","localStorage","getItem","interceptors","request","use","headers","authorization","replaceAll","error","Promise","reject","response","data"],"sources":["E:/SourceDoAn/ecomResource/ecomResource/eCommerce_Reactjs/src/axios.js"],"sourcesContent":["import axios from \"axios\";\r\nimport _ from \"lodash\";\r\nimport React, { createContext, useContext, useState } from 'react';\r\nimport { LoadingContext } from './component/LoadingContext';\r\nrequire(\"dotenv\").config();\r\nconst { setIsLoading } = useContext(LoadingContext);\r\n\r\n\r\nconst instance = axios.create({\r\n    baseURL: process.env.REACT_APP_BACKEND_URL,\r\n\r\n    //  withCredentials: true\r\n});\r\nif (localStorage.getItem(\"token\")) {\r\n    instance.interceptors.request.use(\r\n        (config) => {\r\n            config.headers.authorization =\r\n                \"Bearer \" + localStorage.getItem(\"token\").replaceAll('\"', \"\");\r\n                setIsLoading(true); // Đặt tải thành true khi yêu cầu bắt đầu\r\n            return config;\r\n        },\r\n        (error) => {\r\n            setIsLoading(false); // Đặt tải thành false khi có lỗi yêu cầu\r\n            return Promise.reject(error);\r\n        }\r\n    );\r\n}\r\n\r\ninstance.interceptors.response.use((response) => {\r\n    setIsLoading(false); // Đặt tải thành false khi nhận phản hồi\r\n    // Thrown error for request with OK status code\r\n    const { data } = response;\r\n    return response.data;\r\n}, (error) => {\r\n    setIsLoading(false); // Đảm bảo tải được đặt thành false khi có lỗi phản hồi\r\n    return Promise.reject(error);\r\n});\r\n\r\nexport default instance;\r\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAOC,KAAP,IAAgBC,aAAhB,EAA+BC,UAA/B,EAA2CC,QAA3C,QAA2D,OAA3D;AACA,SAASC,cAAT,QAA+B,4BAA/B;;AACAC,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AACA,MAAM;EAAEC;AAAF,IAAmBL,UAAU,CAACE,cAAD,CAAnC;AAGA,MAAMI,QAAQ,GAAGV,KAAK,CAACW,MAAN,CAAa;EAC1BC,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,qBADK,CAG1B;;AAH0B,CAAb,CAAjB;;AAKA,IAAIC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAJ,EAAmC;EAC/BP,QAAQ,CAACQ,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CACKZ,MAAD,IAAY;IACRA,MAAM,CAACa,OAAP,CAAeC,aAAf,GACI,YAAYN,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BM,UAA9B,CAAyC,GAAzC,EAA8C,EAA9C,CADhB;IAEId,YAAY,CAAC,IAAD,CAAZ,CAHI,CAGgB;;IACxB,OAAOD,MAAP;EACH,CANL,EAOKgB,KAAD,IAAW;IACPf,YAAY,CAAC,KAAD,CAAZ,CADO,CACc;;IACrB,OAAOgB,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;EACH,CAVL;AAYH;;AAEDd,QAAQ,CAACQ,YAAT,CAAsBS,QAAtB,CAA+BP,GAA/B,CAAoCO,QAAD,IAAc;EAC7ClB,YAAY,CAAC,KAAD,CAAZ,CAD6C,CACxB;EACrB;;EACA,MAAM;IAAEmB;EAAF,IAAWD,QAAjB;EACA,OAAOA,QAAQ,CAACC,IAAhB;AACH,CALD,EAKIJ,KAAD,IAAW;EACVf,YAAY,CAAC,KAAD,CAAZ,CADU,CACW;;EACrB,OAAOgB,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CARD;AAUA,eAAed,QAAf"},"metadata":{},"sourceType":"module"}